---
title: Особенности настроек гипервизоров
description: string
published: true
date: 2021-05-17T12:05:19.079Z
tags: 
editor: markdown
dateCreated: 2021-04-02T07:21:55.202Z
---

> **Обязательные условия для работы Ideco UTM:**
> 1.Поддержка UEFI
> 2.Выключить режим Legacy загрузки (он также может называться CSM (Compatibility Support Module) режим)
> 3.Выключить опцию Secure Boot в UEFI
{.is-info}

Ideco UTM поддерживает работу на следующих гипервизорах: 
- VMware (Workstation и ESXi);
- Microsoft Hyper-V (2-го поколения);
- VirtualBox;
- KVM;
- Citrix XenServer. 

Для работы на виртуальных машинах нет необходимости в установке дополнительных драйверов или утилит на Ideco UTM. Гостевые дополнения входят в состав дистрибутива.

## Общие рекомендации
- Тип ОС для создания виртуальной машины: Linux Fedora, 64 bit.
- Минимальный размер жесткого диска - 64 Гб. Рекомендуется выбирать размер больше минимального, так как примерный объем необходимого места на диске для хранения статистики веб-отчетности для 1000 пользователей за 1 год составляет 10-15 Гб. Динамическое расширение жесткого диска в дальнейшем будет невозможно без переустановки системы.
- Минимальное количество оперативной памяти для работы сервера: 8 Гб. Выделение памяти - **статически**.
- Время на виртуальной машине должно соответствовать реальному (с учетом часового пояса).
- Адреса при настройке сетевых интерфейсов не должны пересекаться (не используйте IP-адреса на локальном и внешнем интерфейсах из одной подсети, так как в таком режиме сервер не может быть использован в качестве шлюза).
## Microsoft Hyper-V
Поддерживается только второе поколение виртуальных машин под Windows Server 2012 R2 или выше.
Необходимо отключить опцию Secure Boot (безопасная загрузка).
<a href="https://www.youtube.com/watch?v=dFW_n6dc3B4&feature=youtu.be" target="_blank">Видеоинструкция</a> по настройке виртуальной машины.

Всегда используйте обычный виртуальный сетевой адаптер (Network Adapter).
## VMware ESXi
Перед установкой Ideco UTM необходимо увеличить размер видеопамяти для виртуальной машины до 16 МБ (по умолчанию 4 МБ).

Рекомендуется использовать адаптеры типа "Intel 1000/1000e".
## Citrix XenServer
В случае, если xenserver не загружается с ISO-образа, сделайте следующее: 
1. Выполните команду `xe vm-list`. Данная команда отобразит список виртуальных машин на xenserver;
1. Выберите виртуальную машину с UTM и запомните ее UUID;
1. Затем выполните команду `xe vm-param-set uuid=<UUID> HVM-boot-policy=BIOS\ order HVM-boot-params:order=dc`;

После выполнения данных шагов должна начаться загрузка с установочного носителя.

## KVM
  1. При установке Ideco UTM выберите тип операционной системы - **Fedora**.
  2. На пятом шаге установки обязательно поставьте галочку **Проверить конфигурацию перед установкой** и нажмите кнопку **Готово**.
  ![create-vm.png](/create-vm.png)
  3. В появившемся окне на вкладке **Обзор** в поле Firmware выберите пункт **UEFI x86_64:/usr/share/OVMF/OVMF_CODE.fd**. Выбор этого пункта включит UEFI и выключит опцию Secure Boot.
![create-vm1.png](/create-vm1.png)
> Если пункта **UEFI x86_64:/usr/share/OVMF/OVMF_CODE.fd** нет в списке, то нужно доустановить пакет ovmf. В Ubuntu этот пакет устанавливается командой **sudo apt install ovmf**.
{.is-info}
